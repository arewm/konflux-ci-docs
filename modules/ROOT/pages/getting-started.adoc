= Getting started with {ProductName}
:description: Understand key concepts and terminology used within {ProductName} before proceeding with common workflows.

{ProductName} utilizes standard industry terminology where possible but also introduces specific concepts critical to its operation. This page defines key terms necessary for understanding {ProductName}. Refer to the xref:glossary:index.adoc[glossary] for a comprehensive list.

== Key concepts

=== Namespace
A namespace in Kubernetes provides workload isolation. You typically interact with resources scoped within a namespace. Most {ProductName} Custom Resources (CRs), including Components, Applications, Snapshots, and Secrets, operate within a single namespace.

{ProductName} uses Tekton PipelineRuns within a namespace to perform all builds. https://pipelinesascode.com/[Pipelines as Code] typically triggers these builds based on PipelineDefinitions committed to Git repositories.

==== Tenant namespace
Tenant namespaces are Kubernetes namespaces where Tekton Pipelines produce build artifacts. Access is controlled via link:https://konflux-ci.dev/architecture/ADR/0011-roles-and-permissions.html[role-based access control (RBAC)], allowing multiple users or teams to share a namespace based on assigned roles.
// TODO: Document the process for requesting or creating namespaces.

Users with the `admin` role in a namespace can grant, modify, or remove access for other users. Namespace admins must ensure users have appropriate permissions.

CAUTION: Granting excessive privileges might expose secrets or allow unintended actions within the namespace.

==== Managed namespace
Use managed namespaces for actions requiring credentials not controlled by tenant namespace users (e.g., production releases). Since tenant namespace admins can view secrets within their namespace, sensitive operations often occur in separate managed namespaces. Interaction typically involves creating a Release CR in the tenant namespace referencing a Snapshot. This triggers a specific pipeline within the target managed namespace.

=== Component
A Component CR defines properties for an Open Container Initiative (OCI) artifact. It includes the source Git repository, the latest built commit reference, initial build configuration (like Containerfile path), and relationships to other Components. Each Component belongs to a single Application.

IMPORTANT: Component names must be unique within a namespace, even across different Applications.

=== Pipelines as Code (PAC)
https://pipelinesascode.com/[Pipelines as Code] (PAC) provides tooling to define and trigger Tekton-based CI/CD pipelines from Git repositories. {ProductName} uses PAC to run pipelines defined in the `.tekton` directory of a component's repository upon new commits or pull requests.

=== Build pipeline
When {ProductName} detects a push or pull request event, it runs the Tekton pipeline defined in the component's repository (`.tekton` directory). This build pipeline executes tasks to build and test the component artifact. Build tasks typically include cloning the Git repository, fetching dependencies, building the OCI artifact, and generating SBOMs. Test tasks often involve security scanning (e.g., Snyk, Clair) and antivirus checks.

=== Application
An Application CR represents a collection of related Components. Consider it the primary {ProductName} object modeling a specific product version or releasable unit. You can optionally decompose a complex product into multiple Applications.

The Application CR references its owned Components and their source repositories. When a Component build completes, the {ProductName} Integration Service creates a Snapshot CR. This Snapshot captures the latest Git/OCI references for all Components within the Application (including the newly built one) and serves as input for IntegrationTestScenarios.

=== Snapshot
A Snapshot CR represents an immutable set of specific Component versions (Git commit references or OCI image digests). Snapshots result from build events (push or pull request) and capture a collection of components intended for testing or release together. A Snapshot might not always contain the absolute latest build artifact for every Component in the Application.

=== IntegrationTestScenario
An IntegrationTestScenario (ITS) CR defines a Tekton Pipeline for testing a complete Snapshot. The {ProductName} Integration Service automatically runs all ITSs associated with an Application whenever a new Snapshot for that Application is created. {ProductName} automatically creates a default ITS for each new Application to validate components against a specified EnterpriseContractPolicy.

You can configure each ITS as optional or mandatory for release promotion. All mandatory ITSs must pass successfully before {ProductName} updates the Component CRs with the new build references.

=== EnterpriseContractPolicy
{ProductName} promotes a "build once, release multiple times" approach. An EnterpriseContractPolicy (ECP) defines the specific requirements a Snapshot must meet for a particular release action. An ECP enforces these build requirements and can be defined as a Kubernetes CR.

When {ProductName} evaluates an ECP against a Snapshot, it returns a single result based on the most severe violation. If all Components in the Snapshot pass, the evaluation succeeds. However, if even one Component fails the policy, the entire Snapshot evaluation fails. This behavior requires careful consideration when using the default ITS for Applications with multiple components.

NOTE: You can configure ECP evaluation to run in Single Component mode. See xref:patterns:testing-releasing-single-component.adoc[Testing and Releasing a Single Component].

=== ReleasePlan
Create a ReleasePlan (RP) CR in the tenant namespace to define how an Application should be released. The RP links the source Application to a target managed namespace and release pipeline. It specifies release automation settings (automatic or manual) and provides static data required by the release pipeline.

=== ReleasePlanAdmission
Create a ReleasePlanAdmission (RPA) CR in the *managed* namespace corresponding to a ReleasePlan. The RPA specifies the exact release pipeline to execute and the ECP that Snapshots must pass before the pipeline runs. It also defines critical release details, such as target repositories. For example, if the release pipeline uses the link:https://github.com/konflux-ci/release-service-catalog/blob/production/tasks/managed/apply-mapping/apply-mapping.yaml[apply-mapping] task, the RPA's `.spec.data.mapping.components` section specifies the destination repositories (e.g., `registry.redhat.io/foo/bar`).

=== Release
Create a Release CR in your *tenant* namespace to initiate the release of a specific Snapshot according to a specific ReleasePlan. The Release CR represents the active intent to release content; its presence triggers the release process defined in the referenced ReleasePlan and ReleasePlanAdmission.

NOTE: You can configure a ReleasePlan for xref:releasing:create-release-plan.adoc[automatic releases]. When enabled, {ProductName} automatically creates Release CRs for Snapshots that pass all required IntegrationTestScenarios. link:https://issues.redhat.com/browse/KONFLUX-1364[Future enhancements] aim to allow dynamic metadata collection for these auto-generated Releases.

== Working within {ProductName}

Perform all work in {ProductName} within a namespace (your own, shared team, or managed). Use Tekton PipelineRuns to execute actions within namespaces. As you onboard Components, customize the PipelineDefinitions in your Git repositories to define how {ProductName} builds and tests your artifacts.

=== Namespace, Application, Component, and Project/Product relationships
{ProductName} users operate within namespaces. A namespace typically scopes to a single project or product team, although a project might utilize multiple namespaces if needed. A namespace contains Applications, and Applications contain Components. Avoid sharing a single namespace across multiple distinct projects or products.

=== Common actions in tenant namespaces
Within your tenant namespaces, you typically perform these actions:
* Create and manage Components and Applications.
* Trigger and monitor PipelineRuns defined in your Git repositories.
* View and iterate on IntegrationTestScenario results.
* Create Release CRs to initiate Snapshot releases.

=== Artifact usage and release model
{ProductName} pushes artifacts built in your tenant namespace (triggered by Git events) to an OCI registry, along with associated metadata like xref:metadata:index.adoc[SLSA provenance attestations and SBOMs]. Use these artifacts from the registry for development, testing, deployment, or further releases. {ProductName} supports releasing the same artifact multiple times to different destinations, potentially gated by unique ECPs for each release action.

include::partial${context}-additional-getting-started.adoc[]

include::partial${context}-getting-started-with-the-cli.adoc[]